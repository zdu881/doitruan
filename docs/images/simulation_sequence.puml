@startuml
title Simulation lifecycle sequence

actor User
participant Frontend
participant Backend
participant "Ray Head" as RHead
participant "Ray Worker" as RWorker
participant "Object Store" as OBJ

User -> Frontend : configure scenario & start
Frontend -> Backend : POST /api/simulation/start (scenario)
Backend -> RHead : submit tasks (ray.remote)
RHead -> RWorker : schedule & execute task
RWorker -> OBJ : put(large_result) returns obj_ref
RWorker -> Backend : notify task_done(obj_ref)
Backend -> OBJ : get(obj_ref)
Backend -> Frontend : push via WebSocket (state_update)
Frontend -> User : update UI

note over Backend,RHead
  job_id flow: generated by Backend -> used by Ray tasks
end note

@enduml
