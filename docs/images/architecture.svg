<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="DESCRIPTION" height="935px" preserveAspectRatio="none" style="width:1044px;height:935px;background:#FFFFFF;" version="1.1" viewBox="0 0 1044 935" width="1044px" zoomAndPan="magnify"><defs/><g><!--cluster Users & UI--><g class="cluster" data-entity="Users . UI" data-source-line="4" data-uid="ent0002" id="cluster_Users . UI"><path d="M452.82,6 L536.7878,6 A3.75,3.75 0 0 1 539.2878,8.5 L546.2878,28.2969 L623.82,28.2969 A2.5,2.5 0 0 1 626.32,30.7969 L626.32,246.08 A2.5,2.5 0 0 1 623.82,248.58 L452.82,248.58 A2.5,2.5 0 0 1 450.32,246.08 L450.32,8.5 A2.5,2.5 0 0 1 452.82,6" fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="450.32" x2="546.2878" y1="28.2969" y2="28.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="82.9678" x="454.32" y="20.9951">Users &amp; UI</text></g><!--cluster Backend & API--><g class="cluster" data-entity="Backend . API" data-source-line="9" data-uid="ent0005" id="cluster_Backend . API"><path d="M295.82,297.58 L412.2927,297.58 A3.75,3.75 0 0 1 414.7927,300.08 L421.7927,319.8769 L639.82,319.8769 A2.5,2.5 0 0 1 642.32,322.3769 L642.32,398.68 A2.5,2.5 0 0 1 639.82,401.18 L295.82,401.18 A2.5,2.5 0 0 1 293.32,398.68 L293.32,300.08 A2.5,2.5 0 0 1 295.82,297.58" fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="293.32" x2="421.7927" y1="319.8769" y2="319.8769"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="115.4727" x="297.32" y="312.5751">Backend &amp; API</text></g><!--cluster Core Computation (CastRay)--><g class="cluster" data-entity="Core Computation .CastRay." data-source-line="14" data-uid="ent0008" id="cluster_Core Computation .CastRay."><path d="M245.82,450.18 L471.4421,450.18 A3.75,3.75 0 0 1 473.9421,452.68 L480.9421,472.4769 L480.82,472.4769 A2.5,2.5 0 0 1 483.32,474.9769 L483.32,534.97 A2.5,2.5 0 0 1 480.82,537.47 L245.82,537.47 A2.5,2.5 0 0 1 243.32,534.97 L243.32,452.68 A2.5,2.5 0 0 1 245.82,450.18" fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="243.32" x2="480.9421" y1="472.4769" y2="472.4769"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="224.6221" x="247.32" y="465.1751">Core Computation (CastRay)</text></g><!--cluster Ray Cluster--><g class="cluster" data-entity="Ray Cluster" data-source-line="18" data-uid="ent0010" id="cluster_Ray Cluster"><path d="M359.82,588.97 L451.5124,588.97 A3.75,3.75 0 0 1 454.0124,591.47 L461.0124,611.2669 L566.82,611.2669 A2.5,2.5 0 0 1 569.32,613.7669 L569.32,925.66 A2.5,2.5 0 0 1 566.82,928.16 L359.82,928.16 A2.5,2.5 0 0 1 357.32,925.66 L357.32,591.47 A2.5,2.5 0 0 1 359.82,588.97" fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="357.32" x2="461.0124" y1="611.2669" y2="611.2669"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="90.6924" x="361.32" y="603.9651">Ray Cluster</text></g><!--entity User--><g class="entity" data-entity="User" data-source-line="5" data-uid="ent0003" id="entity_User"><ellipse cx="501.3251" cy="49.5" fill="#F1F1F1" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M501.3251,57.5 L501.3251,84.5 M488.3251,65.5 L514.3251,65.5 M501.3251,84.5 L488.3251,99.5 M501.3251,84.5 L514.3251,99.5" fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.9102" x="485.37" y="113.9951">User</text></g><!--entity FE--><g class="entity" data-entity="FE" data-source-line="6" data-uid="ent0004" id="entity_FE"><rect fill="#F1F1F1" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="83.1094" x="511.77" y="196.29"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63.1094" x="521.77" y="219.2851">Frontend</text></g><!--entity API--><g class="entity" data-entity="API" data-source-line="10" data-uid="ent0006" id="entity_API"><rect fill="#F1F1F1" height="52.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="132.0273" x="309.31" y="332.58"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72.5088" x="319.31" y="355.5751">API Server</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112.0273" x="319.31" y="371.872">(Flask / FastAPI)</text></g><!--entity WS--><g class="entity" data-entity="WS" data-source-line="11" data-uid="ent0007" id="entity_WS"><rect fill="#F1F1F1" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="149.0625" x="476.79" y="340.73"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129.0625" x="486.79" y="363.7251">WebSocket Server</text></g><!--entity CastRay--><g class="entity" data-entity="CastRay" data-source-line="15" data-uid="ent0009" id="entity_CastRay"><rect fill="#F1F1F1" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="77.7295" x="283.46" y="485.18"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57.7295" x="293.46" y="508.1751">CastRay</text></g><!--entity RHead--><g class="entity" data-entity="RHead" data-source-line="19" data-uid="ent0011" id="entity_RHead"><rect fill="#F1F1F1" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="87.6484" x="381.5" y="623.97"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67.6484" x="391.5" y="646.9651">Ray Head</text></g><!--entity RWorker--><g class="entity" data-entity="RWorker" data-source-line="20" data-uid="ent0012" id="entity_RWorker"><rect fill="#F1F1F1" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119.9004" x="373.37" y="737.27"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99.9004" x="383.37" y="760.2651">Ray Worker(s)</text></g><!--entity OBJ--><g class="entity" data-entity="OBJ" data-source-line="21" data-uid="ent0013" id="entity_OBJ"><path d="M373.64,860.57 C373.64,850.57 427.3182,850.57 427.3182,850.57 C427.3182,850.57 480.9964,850.57 480.9964,860.57 L480.9964,902.1637 C480.9964,912.1637 427.3182,912.1637 427.3182,912.1637 C427.3182,912.1637 373.64,912.1637 373.64,902.1637 L373.64,860.57" fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M373.64,860.57 C373.64,870.57 427.3182,870.57 427.3182,870.57 C427.3182,870.57 480.9964,870.57 480.9964,860.57" fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87.3564" x="383.64" y="887.5651">Object Store</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61.3457" x="383.64" y="903.862">(Plasma)</text></g><!--entity DB--><g class="entity" data-entity="DB" data-source-line="24" data-uid="ent0014" id="entity_DB"><path d="M33.93,490.68 C33.93,480.68 88.3192,480.68 88.3192,480.68 C88.3192,480.68 142.7083,480.68 142.7083,490.68 L142.7083,515.9769 C142.7083,525.9769 88.3192,525.9769 88.3192,525.9769 C88.3192,525.9769 33.93,525.9769 33.93,515.9769 L33.93,490.68" fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M33.93,490.68 C33.93,500.68 88.3192,500.68 88.3192,500.68 C88.3192,500.68 142.7083,500.68 142.7083,490.68" fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.7783" x="43.93" y="517.6751">DB / Storage</text></g><!--entity GIS--><g class="entity" data-entity="GIS" data-source-line="25" data-uid="ent0015" id="entity_GIS"><rect fill="#F1F1F1" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="106.6455" x="7" y="196.29"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86.6455" x="17" y="219.2851">External GIS</text></g><!--entity OPS--><g class="entity" data-entity="OPS" data-source-line="26" data-uid="ent0016" id="entity_OPS"><rect fill="#F1F1F1" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="135.6846" x="295.48" y="196.29"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115.6846" x="305.48" y="219.2851">Monitoring / Ops</text></g><g class="entity" data-entity="GMN29" data-source-line="43" data-uid="ent0030" id="entity_GMN29"><path d="M641.99,194.3 L641.99,210.43 L595.26,214.43 L641.99,218.43 L641.99,234.5656 A0,0 0 0 0 641.99,234.5656 L858.6502,234.5656 A0,0 0 0 0 858.6502,234.5656 L858.6502,204.3 L848.6502,194.3 L641.99,194.3 A0,0 0 0 0 641.99,194.3" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M848.6502,194.3 L848.6502,204.3 L858.6502,204.3 L848.6502,194.3" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="195.6602" x="647.99" y="211.3669">Protocols: HTTPS / WebSocket</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="190.4614" x="647.99" y="226.4997">Auth: Bearer token (optional)</text></g><g class="entity" data-entity="GMN32" data-source-line="48" data-uid="ent0033" id="entity_GMN32"><path d="M598.91,629.55 L598.91,638.12 L469.38,642.12 L598.91,646.12 L598.91,654.6828 A0,0 0 0 0 598.91,654.6828 L869.7411,654.6828 A0,0 0 0 0 869.7411,654.6828 L869.7411,639.55 L859.7411,629.55 L598.91,629.55 A0,0 0 0 0 598.91,629.55" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M859.7411,629.55 L859.7411,639.55 L869.7411,639.55 L859.7411,629.55" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="249.8311" x="604.91" y="646.6169">Ray uses gRPC between head/workers</text></g><!--link User to FE--><g class="link" data-entity-1="User" data-entity-2="FE" data-source-line="28" data-uid="lnk17" id="link_User_FE"><path d="M515.95,117.63 C525.98,143.35 536.6495,170.6903 544.3695,190.4803" fill="none" id="User-to-FE" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="546.55,196.07,547.0057,186.2317,544.7329,191.4119,539.5527,189.1391,546.55,196.07" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107.0659" x="534.32" y="160.3669">use UI (browser)</text></g><!--link FE to API--><g class="link" data-entity-1="FE" data-entity-2="API" data-source-line="29" data-uid="lnk18" id="link_FE_API"><path d="M541.37,233.02 C530.18,248.13 512.08,269.38 491.32,281.58 C478.68,289.01 472.43,283.02 459.32,289.58 C437.64,300.43 420.8896,313.6211 405.2296,328.0711" fill="none" id="FE-to-API" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="400.82,332.14,410.1469,328.9764,404.4946,328.7493,404.7218,323.097,400.82,332.14" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="241.8267" x="513.32" y="277.6469">REST API (POST /api/simulation/start)</text></g><!--link FE to WS--><g class="link" data-entity-1="FE" data-entity-2="WS" data-source-line="30" data-uid="lnk19" id="link_FE_WS"><path d="M576.98,232.95 C590.2,241.73 607.39,251.54 624.32,256.58 C640.32,261.34 762.84,252.47 774.32,264.58 C823.48,316.43 714.5832,339.8321 632.1232,350.1921" fill="none" id="FE-to-WS" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="626.17,350.94,635.5984,353.7869,631.131,350.3167,634.6012,345.8493,626.17,350.94" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="252.6685" x="784.32" y="277.6469">WebSocket (ws://.../simulation/stream)</text></g><!--link API to CastRay--><g class="link" data-entity-1="API" data-entity-2="CastRay" data-source-line="31" data-uid="lnk20" id="link_API_CastRay"><path d="M365.72,385.67 C355.05,414.38 340.1726,454.3467 330.9326,479.1767" fill="none" id="API-to-CastRay" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="328.84,484.8,335.7277,477.7602,330.5838,480.1139,328.23,474.97,328.84,484.8" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126.5786" x="354.32" y="430.2469">submit job / control</text></g><!--link CastRay to RHead--><g class="link" data-entity-1="CastRay" data-entity-2="RHead" data-source-line="32" data-uid="lnk21" id="link_CastRay_RHead"><path d="M304.6,521.82 C292.41,536.04 280.12,556.4 290.32,572.97 C310,604.95 344.0652,620.7622 375.3852,630.0022" fill="none" id="CastRay-to-RHead" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="381.14,631.7,373.6397,625.3168,376.3443,630.2852,371.376,632.9899,381.14,631.7" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211.269" x="291.32" y="569.0369">submit Ray tasks / create Actors</text></g><!--link RHead to RWorker--><g class="link" data-entity-1="RHead" data-entity-2="RWorker" data-source-line="33" data-uid="lnk22" id="link_RHead_RWorker"><path d="M422.99,660.6 C421.63,673.52 420.51,691.54 422.32,707.27 C423.48,717.29 424.4531,722.4749 426.7631,731.3149" fill="none" id="RHead-to-RWorker" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="428.28,737.12,429.8746,727.4011,427.0159,732.2824,422.1345,729.4237,428.28,737.12" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96.5288" x="423.32" y="703.3369">schedule tasks</text></g><!--link RWorker to OBJ--><g class="link" data-entity-1="RWorker" data-entity-2="OBJ" data-source-line="34" data-uid="lnk23" id="link_RWorker_OBJ"><path d="M432.48,773.91 C431.51,793.8 430.2204,820.607 429.0604,844.547" fill="none" id="RWorker-to-OBJ" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="428.77,850.54,433.2009,841.7441,429.012,845.5459,425.2103,841.357,428.77,850.54" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143.8506" x="431.32" y="816.6369">put / get large objects</text></g><!--link RWorker to API--><g class="link" data-entity-1="RWorker" data-entity-2="API" data-source-line="35" data-uid="lnk24" id="link_RWorker_API"><path d="M489.89,736.95 C503.49,729.95 516.37,720.34 524.32,707.27 C591.8,596.31 574.91,514.85 489.32,417.18 C480.23,406.8 472.06,414.49 459.32,409.18 C443.88,402.72 432.9425,396.9976 419.0525,388.5876" fill="none" id="RWorker-to-API" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="413.92,385.48,419.5471,393.5631,418.1971,388.0697,423.6905,386.7197,413.92,385.48" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="237.1484" x="566.32" y="569.0369">push status (via object refs or REST)</text></g><!--link API to DB--><g class="link" data-entity-1="API" data-entity-2="DB" data-source-line="36" data-uid="lnk25" id="link_API_DB"><path d="M309.01,364.21 C234.68,370.57 120.94,385.33 93.32,417.18 C78.48,434.29 78.5643,455.4483 81.8643,474.4683" fill="none" id="API-to-DB" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="82.89,480.38,85.2926,470.8287,82.0353,475.4536,77.4104,472.1963,82.89,480.38" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="245.6479" x="94.32" y="430.2469">persist job metadata and checkpoints</text></g><!--link API to OPS--><g class="link" data-entity-1="API" data-entity-2="OPS" data-source-line="37" data-uid="lnk26" id="link_API_OPS"><path d="M373.17,332.32 C370.75,303.61 367.3944,263.7688 365.2944,238.8788" fill="none" id="API-to-OPS" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="364.79,232.9,361.5608,242.2044,365.2104,237.8823,369.5325,241.5318,364.79,232.9" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113.1089" x="369.32" y="277.6469">emit metrics/logs</text></g><!--link OPS to API--><g class="link" data-entity-1="OPS" data-entity-2="API" data-source-line="39" data-uid="lnk28" id="link_OPS_API"><path d="M295.15,227.28 C259.03,236.98 225.16,253.77 241.32,281.58 C256.19,307.16 277.7359,322.3694 303.6259,334.2394" fill="none" id="OPS-to-API" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="309.08,336.74,302.5659,329.3531,304.5349,334.6562,299.2318,336.6252,309.08,336.74" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116.5239" x="242.32" y="277.6469">admin commands</text></g><!--link GIS to API--><g class="link" data-entity-1="GIS" data-entity-2="API" data-source-line="38" data-uid="lnk27" id="link_GIS_API"><path d="M69.8,232.87 C78.84,247.9 93.79,269.08 112.32,281.58 C171.84,321.73 246.7169,340.1023 302.9969,349.2023" fill="none" id="GIS-to-API" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="308.92,350.16,300.6739,344.7747,303.9841,349.3619,299.3969,352.6721,308.92,350.16" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115.5337" x="113.32" y="277.6469">provide map data</text></g><!--SRC=[PLHDRzim3BthLn0vjCwXzJs70KtQh1qm98XRvB8BxR296jio93bPCUo_xz7EvtffPV6zHugFp2rbdo5AHHkxtjoLifEIs1SR6wM8hHSJjhPks7D5XQiQLqiTi_XP2da0k5wNOap3nPRNGeEt83xG3Rsz3EYF8U8YEazwYuyJdwRUrL7g5N6WwPFvUw4mna4ZD_GmFuYSUGFSKIP-9_vNdKnB3bjAQSeX8Z0Sg1mErvIbv9c3PZmGEzGokqewSLve0auRELfNKpA1ve8_X_zNSBY_OkER9cMBBlel1MliMNZLPLtewMjywVnMV1Bw1opwJy1M73ddW0op_0FDfWpD53nyZeTNtCDdunzQp1dxE4PB58dQEiJZs5maVFgDCcikwVjBreNn_pB-qzKMP5kl8JDhGfzadXcZBjBTtJSuHYDgaUljXPBSkpq2GuDR3Qf38reyPQ_TCPdFS4gviMcmLLjsxKr3P1zFb6K6njccP1z6QNf_Vt_DyCBLqAYcSWu-W1ZQlBAHFboEWWlCbNUbEOOLsdNz3DJhYC492eTe57hGAGsc1tQKtWCb5HjPjPZsZcAE0GMXym1WP22qHjqbUqo3wwowHlOzQTgm8Rmyje6IdUK357lq7WXReZqxFn0sWe9jig5_N2MHrMLYR0UgAhQDipKo7Ham2HJHDmBhRH7Iqgs3WS6NLNYtiokXYfjkm8pIpc5ULRRM0QsG9XXpguJe2bU6j7PHWj6_vF5Z4Sczw_OIpO-G4Js_la8lFTk9y4CRDoCQ2tlq8pgiDoMkKLkv71fTTjKqlN8fxvtmSLVKBinQeFLYFg5Subx0to2OxhiEXvF2Fm00]--></g></svg>